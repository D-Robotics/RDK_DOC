"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[3746],{17623:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>u,toc:()=>c});var a=t(74848),r=t(28453),o=t(93859),i=t(19365);const l={},s="Monocular Elevation Network",u={id:"Robot_development/boxs/function/elevation_net",title:"Monocular Elevation Network",description:"Introduction",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/05_Robot_development/03_boxs/function/elevation_net.md",sourceDirName:"05_Robot_development/03_boxs/function",slug:"/Robot_development/boxs/function/elevation_net",permalink:"/rdk_doc/en/Robot_development/boxs/function/elevation_net",draft:!1,unlisted:!1,editUrl:"https://d-robotics.github.io/rdk_doc/RDK/docs/05_Robot_development/03_boxs/function/elevation_net.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"YOLO-World",permalink:"/rdk_doc/en/Robot_development/boxs/function/hobot_yolo_world"},next:{title:"Gesture Recognition",permalink:"/rdk_doc/en/Robot_development/boxs/function/hand_gesture_detection"}},d={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Supported Platforms",id:"supported-platforms",level:2},{value:"Preparation",id:"preparation",level:2},{value:"RDK",id:"rdk",level:3},{value:"Usage",id:"usage",level:2},{value:"RDK",id:"rdk-1",level:3},{value:"Result Analysis",id:"result-analysis",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"monocular-elevation-network",children:"Monocular Elevation Network"}),"\n","\n",(0,a.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsx)(n.p,{children:"elevation_net is a monocular elevation network detection algorithm example developed based on the hobot_dnn package. It uses an elevation network model and indoor data with BPU for model inference on the RDK to obtain algorithm inference results."}),"\n",(0,a.jsxs)(n.p,{children:["Code Repository:  (",(0,a.jsx)(n.a,{href:"https://github.com/D-Robotics/elevation_net",children:"https://github.com/D-Robotics/elevation_net"}),")"]}),"\n",(0,a.jsx)(n.p,{children:"Application Scenarios: The monocular elevation network detection algorithm parses images to obtain depth and height information of pixels, mainly used in autonomous driving, smart homes, intelligent transportation, and other fields."}),"\n",(0,a.jsx)(n.h2,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Platform"}),(0,a.jsx)(n.th,{children:"System"}),(0,a.jsx)(n.th,{children:"Function"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"RDK X3, RDK X3 Module, RDK X5"}),(0,a.jsx)(n.td,{children:"Ubuntu 20.04 (Foxy), Ubuntu 22.04 (Humble)"}),(0,a.jsx)(n.td,{children:"\xb7 Start local data offline and save inference rendering results locally"})]})})]}),"\n",(0,a.jsx)(n.h2,{id:"preparation",children:"Preparation"}),"\n",(0,a.jsx)(n.h3,{id:"rdk",children:"RDK"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"RDK has burned the  Ubuntu 20.04/22.04 system image provided by D-Robotics."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"TogetheROS.Bot has been successfully installed on RDK."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.p,{children:"The monocular elevation network detection algorithm example package uses the form of reading local images. After algorithm inference, it detects depth and height information based on pixels of the Image. At the same time, the package processes the depth and height information and publishes PointCloud2 topic data. Users can subscribe to PointCloud2 data for application development."}),"\n",(0,a.jsx)(n.h3,{id:"rdk-1",children:"RDK"}),"\n",(0,a.jsxs)(o.A,{groupId:"tros-distro",children:[(0,a.jsx)(i.A,{value:"foxy",label:"Foxy",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/setup.bash\n\n# Copy the configuration file required for running the example from the installation path of tros.b.\ncp -r /opt/tros/${TROS_DISTRO}/lib/elevation_net/config/ .\n\n# Start the launch file\nros2 launch elevation_net elevation_net.launch.py\n"})})}),(0,a.jsx)(i.A,{value:"humble",label:"Humble",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/humble/setup.bash\n\n# Copy the configuration file required for running the example from the installation path of tros.b.\ncp -r /opt/tros/${TROS_DISTRO}/lib/elevation_net/config/ .\n\n# Start the launch file\nros2 launch elevation_net elevation_net.launch.py\n"})})})]}),"\n",(0,a.jsx)(n.h2,{id:"result-analysis",children:"Result Analysis"}),"\n",(0,a.jsx)(n.p,{children:"The package outputs the following information:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"[16:15:17:520]root@ubuntu:/userdata# ros2 run elevation_net elevation_net\n[16:15:18:976][WARN] [1655108119.406738772] [example]: This is dnn node example!\n[16:15:19:056][WARN] [1655108119.475098438] [elevation_dection]: Parameter:\n[16:15:19:056]config_file_path_:./config\n[16:15:19:056] model_file_name_: ./config/elevation.hbm\n[16:15:19:058]feed_image:./config/images/charging_base.png\n[16:15:19:058][INFO] [1655108119.475257138] [dnn]: Node init.\n[16:15:19:058][INFO] [1655108119.475309553] [elevation_dection]: Set node para.\n[16:15:19:058][INFO] [1655108119.475370258] [dnn]: Model init.\n[16:15:19:058][BPU_PLAT]BPU Platform Version(1.3.1)!\n[16:15:19:095][HBRT] set log level as 0. version = 3.13.27\n[16:15:19:095][DNN] Runtime version = 1.8.4_(3.13.27 HBRT)\n[16:15:19:133][000:000] (model.cpp:244): Empty desc, model name: elevation, input branch:0, input name:inputquanti-_output\n[16:15:19:133][000:000] (model.cpp:244): Empty desc, model name: elevation, input branch:1, input name:inputquanti2-_output\n[16:15:19:134][000:000] (model.cpp:313): Empty desc, model name: elevation, output branch:0, output name:output_block1quanticonvolution0_conv_output\n[16:15:19:134][INFO] [1655108119.528437276] [dnn]: The model input 0 width is 960 and height is 512\n[16:15:19:134][INFO] [1655108119.528535271] [dnn]: The model input 1 width is 960 and height is 512\n[16:15:19:134][INFO] [1655108119.528598393] [dnn]: Task init.\n[16:15:19:135][INFO] [1655108119.530435806] [dnn]: Set task_num [2]\n[16:15:19:135][INFO] [1655108119.530549051] [elevation_dection]: The model input width is 960 and height is 512\n[16:15:19:158][INFO] [1655108119.559583836] [elevation_dection]: read image: ./config/images/charging_base.png to detect\n[16:15:19:299][WARN] [1655108119.731084555] [elevation_dection]: start success!!!\n[16:15:19:351][INFO] [1655108119.779924566] [elevation_net_parser]: fx_inv_: 0.000605\n[16:15:19:383][INFO] [1655108119.780357879] [elevation_net_parser]: fy_inv_: 0.000604\n[16:15:19:383][INFO] [1655108119.780576493] [elevation_net_parser]: cx_inv_: -0.604389\n[16:15:19:383][INFO] [1655108119.780654031] [elevation_net_parser]: cy_inv_: -0.318132\n[16:15:19:384][INFO] [1655108119.780751527] [elevation_net_parser]: nx_: 0.000000\n[16:15:19:384][INFO] [1655108119.780858063] [elevation_net_parser]: ny_: 0.000000\n[16:15:19:384][INFO] [1655108119.780962558] [elevation_net_parser]: nz_: 1.000000\n[16:15:19:384][INFO] [1655108119.781067928] [elevation_net_parser]: camera_height: 1.000000\n[16:15:19:385][INFO] [1655108119.781833267] [elevation_net_parser]: model out width: 480, height: 256\n```[16:15:19:416][INFO] [1655108119.808395254] [elevation_net_parser]: depth: 998.000000\n[16:15:19:416][INFO] [1655108119.808593786] [elevation_net_parser]: height: -42.699909\n[16:15:19:416][INFO] [1655108119.808644533] [elevation_net_parser]: depth: 998.000000\n[16:15:19:416][INFO] [1655108119.808692531] [elevation_net_parser]: height: -25.339746\n[16:15:19:416][INFO] [1655108119.808739279] [elevation_net_parser]: depth: 998.000000\n[16:15:19:416][INFO] [1655108119.808785527] [elevation_net_parser]: height: -22.111366\n[16:15:19:416][INFO] [1655108119.808832774] [elevation_net_parser]: depth: 998.000000\n[16:15:19:416][INFO] [1655108119.808878606] [elevation_net_parser]: height: -25.339746\n[16:15:19:416][INFO] [1655108119.808925645] [elevation_net_parser]: depth: 998.000000\n[16:15:19:416][INFO] [1655108119.808971809] [elevation_net_parser]: height: -21.989540\n[16:15:19:416][INFO] [1655108119.809017516] [elevation_net_parser]: depth: 998.000000\n[16:15:19:416][INFO] [1655108119.809063138] [elevation_net_parser]: height: -48.303890\n[16:15:19:416][INFO] [1655108119.809109678] [elevation_net_parser]: depth: 998.000000\n[16:15:19:416][INFO] [1655108119.809155592] [elevation_net_parser]: height: -32.527466\n[16:15:19:416][INFO] [1655108119.809202548] [elevation_net_parser]: depth: 998.000000\n[16:15:19:416][INFO] [1655108119.809247880] [elevation_net_parser]: height: -32.710201\n[16:15:19:416][INFO] [1655108119.809294669] [elevation_net_parser]: depth: 998.000000\n[16:15:19:416][INFO] [1655108119.809340542] [elevation_net_parser]: height: -33.014767\n[16:15:19:417][INFO] [1655108119.809387165] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.809433454] [elevation_net_parser]: height: -35.451283\n[16:15:19:417][INFO] [1655108119.809480202] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.809527158] [elevation_net_parser]: height: -38.192360\n[16:15:19:417][INFO] [1655108119.809573906] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.809619820] [elevation_net_parser]: height: -34.233025\n[16:15:19:417][INFO] [1655108119.809667235] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.809713357] [elevation_net_parser]: height: -34.233025\n[16:15:19:417][INFO] [1655108119.809759397] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.809805686] [elevation_net_parser]: height: -33.014767\n[16:15:19:417][INFO] [1655108119.809852643] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.809899307] [elevation_net_parser]: height: -34.354851\n[16:15:19:417][INFO] [1655108119.809945930] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.809991844] [elevation_net_parser]: height: -35.024891\n[16:15:19:417][INFO] [1655108119.810038384] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.810084715] [elevation_net_parser]: height: -41.298916\n[16:15:19:417][INFO] [1655108119.810131296] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.810268706] [elevation_net_parser]: height: -33.745720\n[16:15:19:417][INFO] [1655108119.810317745] [elevation_net_parser]: depth: 998.000000\n[16:15:19:417][INFO] [1655108119.810364285] [elevation_net_parser]: height: -32.710201\n[16:15:19:417][INFO] [1655108119.810410741] [elevation_net_parser]: depth: 998.000000\n"})}),"\n",(0,a.jsx)(n.p,{children:"The log displays the depth and height information of the image."})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},19365:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var a=t(34164);const r={tabItem:"tabItem_Ymn6"};var o=t(74848);function i(e){let{children:n,hidden:t,className:i}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,i),hidden:t,children:n})}},93859:(e,n,t)=>{t.d(n,{A:()=>N});var a=t(96540),r=t(34164),o=t(86641),i=t(56347),l=t(205),s=t(38874),u=t(24035),d=t(82993);function c(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return c(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}(t);return function(e){const n=(0,u.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function _(e){let{queryString:n=!1,groupId:t}=e;const r=(0,i.W6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,s.aZ)(o),(0,a.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(r.location.search);n.set(o,e),r.replace({...r.location,search:n.toString()})}),[o,r])]}function v(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,o=h(e),[i,s]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:o}))),[u,c]=_({queryString:t,groupId:r}),[v,m]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,o]=(0,d.Dv)(t);return[r,(0,a.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:r}),f=(()=>{const e=u??v;return p({value:e,tabValues:o})?e:null})();(0,l.A)((()=>{f&&s(f)}),[f]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);s(e),c(e),m(e)}),[c,m,o]),tabValues:o}}var m=t(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function g(e){let{className:n,block:t,selectedValue:a,selectValue:i,tabValues:l}=e;const s=[],{blockElementScrollPositionUntilNextRender:u}=(0,o.a_)(),d=e=>{const n=e.currentTarget,t=s.indexOf(n),r=l[t].value;r!==a&&(u(n),i(r))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=s.indexOf(e.currentTarget)+1;n=s[t]??s[0];break}case"ArrowLeft":{const t=s.indexOf(e.currentTarget)-1;n=s[t]??s[s.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:o}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>s.push(e),onKeyDown:c,onClick:d,...o,className:(0,r.A)("tabs__item",f.tabItem,o?.className,{"tabs__item--active":a===n}),children:t??n},n)}))})}function x(e){let{lazy:n,children:t,selectedValue:r}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===r));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function I(e){const n=v(e);return(0,b.jsxs)("div",{className:(0,r.A)("tabs-container",f.tabList),children:[(0,b.jsx)(g,{...n,...e}),(0,b.jsx)(x,{...n,...e})]})}function N(e){const n=(0,m.A)();return(0,b.jsx)(I,{...e,children:c(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var a=t(96540);const r={},o=a.createContext(r);function i(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);