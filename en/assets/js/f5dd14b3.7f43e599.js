"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[9650],{68611:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=n(74848),d=n(28453);const i={sidebar_position:13},o="RTC Debugging Guide",s={id:"Advanced_development/linux_development/driver_development/driver_rtc_dev",title:"RTC Debugging Guide",description:"Note: Using pcf8563 chip as an example",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/07_Advanced_development/02_linux_development/driver_development/driver_rtc_dev.md",sourceDirName:"07_Advanced_development/02_linux_development/driver_development",slug:"/Advanced_development/linux_development/driver_development/driver_rtc_dev",permalink:"/rdk_doc/en/Advanced_development/linux_development/driver_development/driver_rtc_dev",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/07_Advanced_development/02_linux_development/driver_development/driver_rtc_dev.md",tags:[],version:"current",sidebarPosition:13,frontMatter:{sidebar_position:13},sidebar:"tutorialSidebar",previous:{title:"DDR Stress Testing Plan",permalink:"/rdk_doc/en/Advanced_development/linux_development/driver_development/driver_ddr_dev"},next:{title:"Watchdog Driver Debugging Guide",permalink:"/rdk_doc/en/Advanced_development/linux_development/driver_development/driver_watchdog_dev"}},c={},l=[{value:"Driver Code",id:"driver-code",level:2},{value:"Kernel Configuration",id:"kernel-configuration",level:2},{value:"Using the RTC",id:"using-the-rtc",level:2}];function a(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"rtc-debugging-guide",children:"RTC Debugging Guide"}),"\n",(0,r.jsx)(t.p,{children:"Note: Using pcf8563 chip as an example"}),"\n",(0,r.jsx)(t.h2,{id:"driver-code",children:"Driver Code"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"drivers/rtc/rtc-pcf8563.c\n"})}),"\n",(0,r.jsx)(t.h2,{id:"kernel-configuration",children:"Kernel Configuration"}),"\n",(0,r.jsx)(t.p,{children:"CONFIG_RTC_DRV_PCF8563"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"image-20220323100439451",src:n(28135).A+"",width:"785",height:"205"})}),"\n",(0,r.jsx)(t.h2,{id:"using-the-rtc",children:"Using the RTC"}),"\n",(0,r.jsx)(t.p,{children:"After the driver is successfully loaded, the /dev/rtc1 device node will appear, which corresponds to pcf-8563. You can use the following commands for testing."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"# Create a soft link from /dev/rtc1 to /dev/rtc\n\nln -sf /dev/rtc1 /dev/rtc\n\n# Test commands\ndate -s 2022.01.21-21:24:00   \t# Set system time\nhwclock -w       \t\t\t\t# Write system time to RTC\nhwclock -r       \t\t\t\t# Read RTC time to confirm if it was successfully written\nhwclock -s       \t\t\t\t# If the RTC battery is present, after power loss and power on again, update system time to RTC time\ndate             \t\t\t\t# Read system time\n"})}),"\n",(0,r.jsx)(t.admonition,{title:"Note",type:"info",children:(0,r.jsx)(t.p,{children:"If you need to ensure that the RTC can still record time after power loss, you need to provide separate power supply to the RTC. The power supply interface is RTC Battery Con."})})]})}function p(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28135:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/image-20220323100439451-784722fc7613df5fc05d39ea1ecd2eaf.png"},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var r=n(96540);const d={},i=r.createContext(d);function o(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:o(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);