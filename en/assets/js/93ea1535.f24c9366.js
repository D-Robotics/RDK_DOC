"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[9075],{13097:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var o=t(74848),a=t(28453);t(93859),t(19365);const r={sidebar_position:17},s="Face Age Detection",i={id:"Robot_development/boxs/function/mono_face_age_detection",title:"Face Age Detection",description:"Function Introduction",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/05_Robot_development/03_boxs/function/mono_face_age_detection.md",sourceDirName:"05_Robot_development/03_boxs/function",slug:"/Robot_development/boxs/function/mono_face_age_detection",permalink:"/rdk_doc/en/Robot_development/boxs/function/mono_face_age_detection",draft:!1,unlisted:!1,editUrl:"https://github.com/D-Robotics/rdk_doc/blob/main/docs/05_Robot_development/03_boxs/function/mono_face_age_detection.md",tags:[],version:"current",sidebarPosition:17,frontMatter:{sidebar_position:17},sidebar:"tutorialSidebar",previous:{title:"YOLO-World",permalink:"/rdk_doc/en/Robot_development/boxs/function/hobot_yolo_world"},next:{title:"Face 106 Landmarks Detection",permalink:"/rdk_doc/en/Robot_development/boxs/function/mono_face_landmarks_detection"}},c={},l=[{value:"Function Introduction",id:"function-introduction",level:2},{value:"Supported Platforms",id:"supported-platforms",level:2},{value:"Preparation",id:"preparation",level:2},{value:"RDK Platform",id:"rdk-platform",level:3},{value:"Usage Instructions",id:"usage-instructions",level:2},{value:"Result Analysis",id:"result-analysis",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"face-age-detection",children:"Face Age Detection"}),"\n","\n",(0,o.jsx)(n.h2,{id:"function-introduction",children:"Function Introduction"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:"Face Age Detection Example"})," subscribes to images and smart messages containing face bounding box information,\nperforms algorithm inference using the BPU, and publishes algorithm messages containing age information."]}),"\n",(0,o.jsxs)(n.p,{children:["Code Repository: ",(0,o.jsx)(n.a,{href:"https://github.com/D-Robotics/face_age_detection",children:"https://github.com/D-Robotics/face_age_detection"})]}),"\n",(0,o.jsx)(n.h2,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Platform"}),(0,o.jsx)(n.th,{children:"Operating Mode"}),(0,o.jsx)(n.th,{children:"Example Functionality"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"RDK X3, RDK X3 Module"}),(0,o.jsx)(n.td,{children:"Ubuntu 22.04 (Humble)"}),(0,o.jsx)(n.td,{children:"Starts MIPI/USB camera and displays inference rendering results via the web"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"RDK X5"}),(0,o.jsx)(n.td,{children:"Ubuntu 22.04 (Humble)"}),(0,o.jsx)(n.td,{children:"Starts MIPI/USB camera and displays inference rendering results via the web"})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"preparation",children:"Preparation"}),"\n",(0,o.jsx)(n.h3,{id:"rdk-platform",children:"RDK Platform"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The RDK has been flashed with the Ubuntu 22.04 system image."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"TogetheROS.Bot has been successfully installed on the RDK."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"A MIPI or USB camera has been installed on the RDK."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Ensure that the PC can access the RDK via the network."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"usage-instructions",children:"Usage Instructions"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:"Face Age Detection (face_age_detection) package"})," subscribes to images published by the sensor package and face\nbounding box detection results published by the human detection and tracking package. After performing inference, it\npublishes algorithm messages and displays the published images and corresponding algorithm results on the PC's browser\nthrough the websocket package."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Using MIPI Camera to Publish Images"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Configure the tros.b environment\nsource /opt/tros/humble/setup.bash\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"# Copy the configuration files needed for running the example from the tros.b installation path.\ncp -r /opt/tros/${TROS_DISTRO}/lib/mono2d_body_detection/config/ .\n\n# Configure MIPI camera\nexport CAM_TYPE=mipi\n\n# Launch the launch file\nros2 launch face_age_detection body_det_face_age_det.launch.py\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Using USB Camera to Publish Images"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Configure the tros.b environment\nsource /opt/tros/humble/setup.bash\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"# Copy the configuration files needed for running the example from the tros.b installation path.\ncp -r /opt/tros/${TROS_DISTRO}/lib/mono2d_body_detection/config/ .\n\n# Configure USB camera\nexport CAM_TYPE=usb\n\n# Launch the launch file\nros2 launch face_age_detection body_det_face_age_det.launch.py\n"})}),"\n",(0,o.jsx)(n.h2,{id:"result-analysis",children:"Result Analysis"}),"\n",(0,o.jsx)(n.p,{children:"The following information is output on the running terminal:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"[mono2d_body_detection-3] [WARN] [1731986598.310822365] [example]: This is mono2d body det example!\n[face_age_detection-5] [WARN] [1731986598.405068602] [face_age_det_node]: => face_age_det_node params:\n[face_age_detection-5] => feed_type: 0\n[face_age_detection-5] => is_sync_mode: 0\n[face_age_detection-5] => model_file_name: /root/zhikang.zeng/work_humble_ws_x5/tros_ws/install/share/face_age_detection/config/faceAge.hbm\n[face_age_detection-5] => is_shared_mem_sub: 1\n[face_age_detection-5] => dump_render_img: 0\n[face_age_detection-5] => ai_msg_pub_topic_name: /hobot_face_age_detection\n[face_age_detection-5] => max_slide_window_size: 30\n[face_age_detection-5] [INFO] [1731986598.406117839] [dnn]: Node init.\n[face_age_detection-5] [INFO] [1731986598.406189046] [face_age_det_node]: => Set node para.\n[face_age_detection-5] [INFO] [1731986598.406316544] [dnn]: Model init.\n[mono2d_body_detection-3] [WARN] [1731986598.408599348] [mono2d_body_det]: Parameter:\n[mono2d_body_detection-3]  is_sync_mode_: 0\n[mono2d_body_detection-3]  model_file_name_: config/multitask_body_head_face_hand_kps_960x544.hbm\n[mono2d_body_detection-3]  is_shared_mem_sub: 1\n[mono2d_body_detection-3]  ai_msg_pub_topic_name: /hobot_mono2d_body_detection\n[mono2d_body_detection-3]  ros_img_topic_name: /image_raw\n[mono2d_body_detection-3]  image_gap: 1\n[mono2d_body_detection-3] [BPU_PLAT]BPU Platform Version(1.3.6)!\n[mono2d_body_detection-3] [HBRT] set log level as 0. version = 3.15.54.0\n[mono2d_body_detection-3] [DNN] Runtime version = 1.23.10_(3.15.54 HBRT)\n[face_age_detection-5] [BPU_PLAT]BPU Platform Version(1.3.6)!\n[face_age_detection-5] [HBRT] set log level as 0. version = 3.15.54.0\n[face_age_detection-5] [DNN] Runtime version = 1.23.10_(3.15.54 HBRT)\n"})}),"\n",(0,o.jsx)(n.p,{children:"The log output indicates that the program is running successfully, with the algorithm input and output frame rate set to\n30fps, and the frame rate statistics refreshed every second."}),"\n",(0,o.jsxs)(n.p,{children:["Enter ",(0,o.jsx)(n.a,{href:"http://IP:8000",children:"http://IP:8000"})," in the browser on the PC to view the images and algorithm rendering effects (where IP is the IP\naddress of the RDK):"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(31832).A+"",width:"1920",height:"929"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},19365:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var o=t(34164);const a={tabItem:"tabItem_Ymn6"};var r=t(74848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,o.A)(a.tabItem,s),hidden:t,children:n})}},93859:(e,n,t)=>{t.d(n,{A:()=>y});var o=t(96540),a=t(34164),r=t(86641),s=t(56347),i=t(205),c=t(38874),l=t(24035),d=t(82993);function u(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:o,default:a}}=e;return{value:n,label:t,attributes:o,default:a}}))}(t);return function(e){const n=(0,l.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function _(e){let{queryString:n=!1,groupId:t}=e;const a=(0,s.W6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,c.aZ)(r),(0,o.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})}),[r,a])]}function p(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,r=h(e),[s,c]=(0,o.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const o=t.find((e=>e.default))??t[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:n,tabValues:r}))),[l,u]=_({queryString:t,groupId:a}),[p,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,r]=(0,d.Dv)(t);return[a,(0,o.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:a}),b=(()=>{const e=l??p;return m({value:e,tabValues:r})?e:null})();(0,i.A)((()=>{b&&c(b)}),[b]);return{selectedValue:s,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),f(e)}),[u,f,r]),tabValues:r}}var f=t(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=t(74848);function x(e){let{className:n,block:t,selectedValue:o,selectValue:s,tabValues:i}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.a_)(),d=e=>{const n=e.currentTarget,t=c.indexOf(n),a=i[t].value;a!==o&&(l(n),s(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:r}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:o===n?0:-1,"aria-selected":o===n,ref:e=>c.push(e),onKeyDown:u,onClick:d,...r,className:(0,a.A)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":o===n}),children:t??n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:a}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===a));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function j(e){const n=p(e);return(0,g.jsxs)("div",{className:(0,a.A)("tabs-container",b.tabList),children:[(0,g.jsx)(x,{...n,...e}),(0,g.jsx)(v,{...n,...e})]})}function y(e){const n=(0,f.A)();return(0,g.jsx)(j,{...e,children:u(e.children)},String(n))}},31832:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/face_age_det_render-7b3efcde082d4c3a513f73a49356ba8e.png"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var o=t(96540);const a={},r=o.createContext(a);function s(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);