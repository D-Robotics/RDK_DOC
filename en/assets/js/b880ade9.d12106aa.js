"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[28],{12102:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/audio_control-3b5149353b86861594dcedb597e6181c.jpg"},19365:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var o=t(34164);const a={tabItem:"tabItem_Ymn6"};var r=t(74848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,o.A)(a.tabItem,s),hidden:t,children:n})}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var o=t(96540);const a={},r=o.createContext(a);function s(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(r.Provider,{value:n},e.children)}},34417:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/doa_line-fdbb50d61dd7705a25a8973a58ee3aeb.jpg"},44181:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var o=t(74848),a=t(28453),r=t(93859),s=t(19365);const i={sidebar_position:7},l="5.4.7 Robot Follows the Voice's DOA And Command",c={id:"Robot_development/apps/car_audio_tracking",title:"5.4.7 Robot Follows the Voice's DOA And Command",description:"Introduction",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/05_Robot_development/04_apps/car_audio_tracking.md",sourceDirName:"05_Robot_development/04_apps",slug:"/Robot_development/apps/car_audio_tracking",permalink:"/rdk_doc/en/Robot_development/apps/car_audio_tracking",draft:!1,unlisted:!1,editUrl:"https://github.com/D-Robotics/rdk_doc/blob/main/docs/05_Robot_development/04_apps/car_audio_tracking.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"5.4.6 Voice Control The Car",permalink:"/rdk_doc/en/Robot_development/apps/car_audio_control"},next:{title:"5.4.8 Car Parking Space Search",permalink:"/rdk_doc/en/Robot_development/apps/parking_search"}},d={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Supported Platforms",id:"supported-platforms",level:2},{value:"Preparation",id:"preparation",level:2},{value:"RDK",id:"rdk",level:3},{value:"Usage",id:"usage",level:2},{value:"RDK",id:"rdk-1",level:3},{value:"Result Analysis",id:"result-analysis",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"547-robot-follows-the-voices-doa-and-command",children:"5.4.7 Robot Follows the Voice's DOA And Command"}),"\n","\n",(0,o.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,o.jsx)(n.p,{children:"The voice tracking control car movement function controls the robot to rotate towards the direction of the sound source based on the DOA angle information of the sound source localization, and controls the robot to move forward. This function needs to be used together with the intelligent voice module of the D-Robotics Robot Operating System. When the user speaks the wake-up word configured by the intelligent voice recognition module to wake up the device, the voice tracking control car function will be activated. After that, when the user speaks the wake-up word or the configured command word, the intelligent voice recognition module will output the DOA angle information of the sound source. After receiving the DOA angle information, this module will control the robot to turn towards the direction of the sound source and move forward a certain distance."}),"\n",(0,o.jsx)(n.p,{children:"The process is as follows:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(12102).A+"",width:"1120",height:"870"})}),"\n",(0,o.jsx)(n.p,{children:"This app uses a virtual car in Gazebo simulation environment on the PC as an example, and the published control instructions can also be directly used to control a physical robot."}),"\n",(0,o.jsx)(n.p,{children:"The DOA angle information of the sound source localization output by the intelligent voice function is in units of degrees, and supports two types of microphone arrays: linear and circular. The angle range of the linear microphone array is 0 degrees to 180 degrees, and the angle range of the circular microphone array is 0 degrees to 360 degrees. The relative positional relationship between the microphone angles is strongly related to the installation position of the microphones. The actual angle diagram is as follows:"}),"\n",(0,o.jsx)(n.p,{children:"Linear microphone array:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(34417).A+"",width:"1200",height:"320"})}),"\n",(0,o.jsx)(n.p,{children:"Circular microphone array:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(47075).A+"",width:"1200",height:"900"})}),"\n",(0,o.jsxs)(n.p,{children:["Code repository:  (",(0,o.jsx)(n.a,{href:"https://github.com/D-Robotics/audio_tracking.git",children:"https://github.com/D-Robotics/audio_tracking.git"}),")"]}),"\n",(0,o.jsx)(n.h2,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Platform"}),(0,o.jsx)(n.th,{children:"System"}),(0,o.jsx)(n.th,{children:"Function"})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"RDK X3, RDK X5"}),(0,o.jsx)(n.td,{children:"Ubuntu 20.04 (Foxy), Ubuntu 22.04 (Humble)"}),(0,o.jsx)(n.td,{children:"Start intelligent voice module, parse voice information, perform voice tracking, and display tracking results in Gazebo"})]})})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Note: Only supports RDK X3, RDK X3 Module is not supported for now."})}),"\n",(0,o.jsx)(n.h2,{id:"preparation",children:"Preparation"}),"\n",(0,o.jsx)(n.h3,{id:"rdk",children:"RDK"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The RDK has been burned with the  Ubuntu 20.04/22.04 system image provided by D-Robotics."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"TogetheROS.Bot has been successfully installed on the RDK."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The intelligent voice algorithm package has been successfully installed on the RDK. Install command:"}),"\n",(0,o.jsxs)(r.A,{groupId:"tros-distro",children:[(0,o.jsx)(s.A,{value:"foxy",label:"Foxy",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install tros-hobot-audio\n"})})}),(0,o.jsx)(s.A,{value:"humble",label:"Humble",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install tros-humble-hobot-audio\n"})})})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The compatible audio board has been successfully connected to the RDK (refer to the ",(0,o.jsx)(n.a,{href:"/rdk_doc/en/Robot_development/boxs/function/hobot_audio",children:"Intelligent Voice section"})," for details)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The PC that is in the same network segment as the RDK (either wired or connected to the same wireless network) needs to have the following environment packages installed:"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(r.A,{groupId:"tros-distro",children:[(0,o.jsxs)(s.A,{value:"foxy",label:"Foxy",children:[(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Ubuntu 20.04 system and ",(0,o.jsx)(n.a,{href:"https://docs.ros.org/en/foxy/Installation/Ubuntu-Install-Debians.html",children:"ROS2 Foxy Desktop Full"})]}),"\n",(0,o.jsx)(n.li,{children:"Gazebo and Turtlebot3 related packages. Installation commands:"}),"\n"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"sudo apt-get install ros-foxy-gazebo-*\nsudo apt install ros-foxy-turtlebot3\nsudo apt install ros-foxy-turtlebot3-simulations\n"})})]}),(0,o.jsxs)(s.A,{value:"humble",label:"Humble",children:[(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Ubuntu 22.04 system and ",(0,o.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html",children:"ROS2 Humble Desktop Full"})]}),"\n",(0,o.jsx)(n.li,{children:"Gazebo and Turtlebot3 related packages. Installation commands:"}),"\n"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"sudo apt-get install ros-humble-gazebo-*\nsudo apt install ros-humble-turtlebot3\nsudo apt install ros-humble-turtlebot3-simulations\n"})})]})]}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.h3,{id:"rdk-1",children:"RDK"}),"\n",(0,o.jsx)(n.p,{children:"After running the voice tracking function, the voice tracking control module will receive the voice message results published by the intelligent voice function module, and parse the message. Based on the wake-up event and DOA angle information in the message, the control module will publish commands to the car to turn to a specific angle. After the car turns to the specific angle, the control module will continue to control the car to move forward a certain distance (by default, the module controls the car to move forward by 0.2 meters)."}),"\n",(0,o.jsx)(n.p,{children:"Start the simulation environment on the PC:"}),"\n",(0,o.jsxs)(r.A,{groupId:"tros-distro",children:[(0,o.jsx)(s.A,{value:"foxy",label:"Foxy",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"source /opt/ros/foxy/setup.bash\n"})})}),(0,o.jsx)(s.A,{value:"humble",label:"Humble",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"source /opt/ros/humble/setup.bash\n"})})})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"export TURTLEBOT3_MODEL=burger\nros2 launch turtlebot3_gazebo empty_world.launch.py\n"})}),"\n",(0,o.jsx)(n.p,{children:"After successful startup, the car in the simulation environment will appear as follows:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(75975).A+"",width:"960",height:"563"})}),"\n",(0,o.jsx)(n.p,{children:"Startup program for the RDK:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Copy the audio configuration file and load the audio driver"}),"\n"]}),"\n",(0,o.jsxs)(r.A,{groupId:"tros-distro",children:[(0,o.jsx)(s.A,{value:"foxy",label:"Foxy",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"source /opt/tros/setup.bash\n"})})}),(0,o.jsx)(s.A,{value:"humble",label:"Humble",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"source /opt/tros/humble/setup.bash\n"})})})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"cp -r /opt/tros/${TROS_DISTRO}/lib/hobot_audio/config/ .\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Confirm the microphone device"}),"\n",(0,o.jsxs)(n.p,{children:["The microphone device number is set through the ",(0,o.jsx)(n.code,{children:"microphone_name"})," field in the configuration file ",(0,o.jsx)(n.em,{children:"config/audio_config.json"}),', and the default value is "hw:0,0", which indicates audio device Card0 Device0. The device number can be checked with the command ',(0,o.jsx)(n.code,{children:"ls /dev/snd"}),' such as: "pcmC0D1c"; the letter ',(0,o.jsx)(n.code,{children:"c"})," indicates a capture device, ",(0,o.jsx)(n.code,{children:"C0"})," indicates Card0, and ",(0,o.jsx)(n.code,{children:"D1"}),' indicates Device1. Modify the parameter to "hw:0,1".']}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Start the program"}),"\n",(0,o.jsxs)(r.A,{groupId:"tros-distro",children:[(0,o.jsx)(s.A,{value:"foxy",label:"Foxy",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"source /opt/tros/setup.bash\n"})})}),(0,o.jsx)(s.A,{value:"humble",label:"Humble",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"source /opt/tros/humble/setup.bash\n"})})})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"# Start the launch file and specify the voice DOA angle corresponding to the front of the car, taking 90 as an example\nros2 launch audio_tracking audio_tracking.launch.py car_front_audio_angle:=90\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"result-analysis",children:"Result Analysis"}),"\n",(0,o.jsx)(n.p,{children:"The following information is the output of the RDK running on the terminal:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:'\n        This is audio tracking package.\n\n============================================\n        audio tracking usage\n\nWake up device is "D-Robotics Hello".\nAudio control command word definitions are:\n        "Go forward"\n        "Go backward"\n        "Turn right"\n        "Turn left" \nWhen you say the wake word, the car turns toward you \nLet\'s start the experience\n============================================\n\n[INFO] [1663149803.248119421] [audio_tracking]: AudioTrackingEngine construct\n[INFO] [1663149803.313949108] [rclcpp]: ParametersClass node construct\n[WARN] [1663149803.337782049] [AudioTrackingNode]: Parameter:\n ai_msg_sub_topic_name: /audio_smart\n twist_pub_topic_name: /cmd_vel\n[WARN] [1663149804.316577383] [audio_control_parameter_node]: Robot Move param are\nmove_step: 0.3\nrotate_step: 0.348\n\n[INFO] [1663149814.967019845] [audio_tracking]: process audio frame type:2\n[INFO] [1663149814.967377380] [audio_tracking]: process audio event type:1\n[INFO] [1663149815.012831677] [audio_tracking]: process audio frame type:5\n[WARN] [1663149815.013112088] [audio_tracking]: process audio doa theta:80.000000\n[INFO] [1663149815.168426039] [audio_tracking]: process audio doa move to front distance:0.200000, speed:0.300000, duration:0.666667, ticks:6\n[WARN] [1663149815.769833806] [audio_tracking]: cancel move\n[INFO] [1663149822.128098383] [audio_tracking]: process audio frame type:2\n[INFO] [1663149822.128389794] [audio_tracking]: process audio event type:1\n[INFO] [1663149822.145186562] [audio_tracking]: process audio frame type:5\n[WARN] [1663149822.145491473] [audio_tracking]: process audio doa theta:55.000000\n[INFO] [1663149822.174037772] [audio_tracking]: process audio doa move theta:35.000000, angle:0.610865, direction:1, ticks:6\n[WARN] [1663149822.775398926] [audio_tracking]: cancel move\n[INFO] [1663149822.775698796] [audio_tracking]: process audio doa move to front distance:0.200000, speed:0.300000, duration:0.666667, ticks:6\n[WARN] [1663149823.377099758] [audio_tracking]: cancel move\n'})}),"\n",(0,o.jsx)(n.p,{children:'The above logs capture a segment of the output after the audio control package is launched. The log shows that the wake-up word configured for the intelligent voice recognition module is "D-Robotics Hello". After receiving the wake-up event, the audio tracking control module receives DOA angle information. As shown in the log above, the DOA is 80 degrees. At this time, the audio tracking control module publishes a command to make the car turn left by 20 degrees. After the rotation, the car moves forward, and later the car stops moving.'}),"\n",(0,o.jsxs)(n.p,{children:["On the PC, you can use the ",(0,o.jsx)(n.code,{children:"ros2 topic list"})," command in the terminal to query the topic information of the RDK."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"ros2 topic list\n/audio_smart\n/cmd_vel\n"})}),"\n",(0,o.jsx)(n.p,{children:'The topic "/audio_smart" is the algorithm perception message published, which contains intelligent voice results. The topic "/cmd_vel" is the motion control command published by RDK.'}),"\n",(0,o.jsx)(n.p,{children:'On the PC, the command "ros2 topic echo /cmd_vel" can be used in the terminal to view the motion control command published by RDK:'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"linear:\n  x: 0.0\n  y: 0.30000001192092896\n  z: 0.0\nangular:\n  x: 0.0\n  y: 0.0\n  z: 1.1136000156402588\n---\nlinear:\n  x: 0.0\n  y: 0.30000001192092896\n  z: 0.0\nangular:\n  x: 0.0\n  y: 0.0\n  z: 1.1136000156402588\n---\nlinear:\n  x: 0.0\n  y: 0.30000001192092896\n  z: 0.0\nangular:\n  x: 0.0\n  y: 0.0\n  z: 1.1136000156402588\n---\nlinear:\n  x: 0.0\n  y: 0.30000001192092896\n  z: 0.0\nangular:\n  x: 0.0\n  y: 0.0\n  z: 1.1136000156402588\n---\nlinear:\n  x: 0.0\n```y: 0.30000001192092896\n  z: 0.0\nangular:\n  x: 0.0\n  y: 0.0\n  z: 1.1136000156402588\n---\n"})}),"\n",(0,o.jsx)(n.p,{children:"The PC simulation environment controls the movement of the car based on voice tracking. The effect is shown as follows:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(67257).A+"",width:"800",height:"433"})}),"\n",(0,o.jsx)(n.p,{children:"In the image above, the simulated car on the left rotates according to the angle of the sound source, and the log outputted by the program is on the right. The log contains the DOA angle information."})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},47075:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/doa_circle-604ce4faf1ac6aaf7857bb18144207f0.jpg"},67257:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/audio_tracking-c5960224e6b99081b54513ad9deb34e1.gif"},75975:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/gazebo-0e43917a538ed038fba57f6d0e669957.jpeg"},93859:(e,n,t)=>{t.d(n,{A:()=>_});var o=t(96540),a=t(34164),r=t(86641),s=t(56347),i=t(205),l=t(38874),c=t(24035),d=t(82993);function u(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:o,default:a}}=e;return{value:n,label:t,attributes:o,default:a}}))}(t);return function(e){const n=(0,c.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const a=(0,s.W6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(r),(0,o.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})}),[r,a])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,r=h(e),[s,l]=(0,o.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const o=t.find((e=>e.default))??t[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:n,tabValues:r}))),[c,u]=m({queryString:t,groupId:a}),[g,b]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,r]=(0,d.Dv)(t);return[a,(0,o.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:a}),f=(()=>{const e=c??g;return p({value:e,tabValues:r})?e:null})();(0,i.A)((()=>{f&&l(f)}),[f]);return{selectedValue:s,selectValue:(0,o.useCallback)((e=>{if(!p({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),b(e)}),[u,b,r]),tabValues:r}}var b=t(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(74848);function v(e){let{className:n,block:t,selectedValue:o,selectValue:s,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),d=e=>{const n=e.currentTarget,t=l.indexOf(n),a=i[t].value;a!==o&&(c(n),s(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:r}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:o===n?0:-1,"aria-selected":o===n,ref:e=>l.push(e),onKeyDown:u,onClick:d,...r,className:(0,a.A)("tabs__item",f.tabItem,r?.className,{"tabs__item--active":o===n}),children:t??n},n)}))})}function j(e){let{lazy:n,children:t,selectedValue:a}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===a));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function y(e){const n=g(e);return(0,x.jsxs)("div",{className:(0,a.A)("tabs-container",f.tabList),children:[(0,x.jsx)(v,{...n,...e}),(0,x.jsx)(j,{...n,...e})]})}function _(e){const n=(0,b.A)();return(0,x.jsx)(y,{...e,children:u(e.children)},String(n))}}}]);